<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Styled Annotations</title>
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            background-color: #f4f4f9;
        }

        #chart {
            width: 800px;
            height: 400px;
        }

    </style>
</head>

<body>
    <div class="flex flex-col">
        <div id="chart" style="max-width: 500px; margin: auto;"></div>
        <div id="stacked-bar-chart-section">
            <div id="stacked-bar-chart"></div>
        </div>
    </div>


    <script>
        var options = {
            chart: {
                type: 'line',
                height: 400,
                toolbar: {
                    show: false
                }
            },
            series: [{
                name: 'Stock Price',
                data: [0, 100, 60, 70, 150] // Actual data points for 0, Q1, Q2, Q3, Q4
            }],
            xaxis: {
                categories: ['0', 'Q1', 'Q2', 'Q3', 'Q4'],
                labels: {
                    style: {
                        fontSize: '12px'
                    }
                }
            },
            yaxis: {
                min: 0,
                max: 250,
                labels: {
                    formatter: function (value) {
                        return `$${value}`; // Format the y-axis as currency
                    },
                    style: {
                        fontSize: '12px'
                    }
                },
            },

            markers: {
                size: 6,
                colors: ['#fff'],
                strokeColors: ['#00E396', '#FF4560', '#00E396', '#00E396', '#FF4560'], 
                strokeWidth: 3,
                hover: {
                    size: 8
                }
            },
            stroke: {
                curve: 'smooth',
                width: 2
            },
            dataLabels: {
                enabled: true, // Enable data labels
                formatter: function (val) {
                    return `$${val}`; // Show value with a $ sign on each point
                },
                style: {
                    fontSize: '12px',
                    colors: ['#000'] // Label color
                },
                offsetY: -10, // Position the data label above the point
            },
            annotations: {
                points: [{
                    x: 'Q1',
                    y: 100,
                    marker: {
                        size: 6,
                        fillColor: '#00E396',
                        strokeColor: '#00E396',
                        radius: 2
                    },
                    label: {
                        borderWidth: 1,
                        borderColor: '#00E396',
                        style: {
                            fontSize: '10px',
                            background: '#fff',
                            color: '#000'
                        }
                    }
                },
                {
                    x: 'Q2',
                    y: 60,
                    marker: {
                        size: 6,
                        fillColor: '#FF4560',
                        strokeColor: '#FF4560',
                        radius: 2
                    },
                    label: {
                        borderWidth: 1,
                        borderColor: '#FF4560',
                        style: {
                            fontSize: '10px',
                            background: '#fff',
                            color: '#000'
                        }
                    }
                },
                {
                    x: 'Q3',
                    y: 70,
                    marker: {
                        size: 6,
                        fillColor: '#00E396',
                        strokeColor: '#00E396',
                        radius: 2
                    },
                    label: {
                        borderWidth: 1,
                        borderColor: '#00E396',
                        style: {
                            fontSize: '10px',
                            background: '#fff',
                            color: '#000'
                        }
                    }
                },
                {
                    x: 'Q4',
                    y: 150,
                    marker: {
                        size: 6,
                        fillColor: '#00E396',
                        strokeColor: '#00E396',
                        radius: 2
                    },
                    label: {
                        borderWidth: 1,
                        borderColor: '#00E396',
                        style: {
                            fontSize: '10px',
                            background: '#fff',
                            color: '#000'
                        }
                    }
                }]
            },
            tooltip: {
                enabled: true,
                custom: function ({ series, seriesIndex, dataPointIndex, w }) {
                    const dataLabels = ['0', 'Q1', 'Q2', 'Q3', 'Q4'];
                    const ptValues = ['$0 PT', '$100 PT', '$60 PT', '$70 PT', '$150 PT'];
                    return `
                        <div style="padding: 10px; border: 1px solid #ddd; background: #fff; text-align: left;">
                            <strong>${dataLabels[dataPointIndex]}</strong><br/>
                            Price: ${ptValues[dataPointIndex]}<br/>
                            Todd Cruset<br/>
                            Well Fargo<br/>
                            17% Gain<br/>
                            19% IRR
                        </div>`;
                }
            }
        };

        var chart = new ApexCharts(document.querySelector("#chart"), options);
        chart.render();
    </script>


    <!-- bar chart -->
    <script>
        var options2 = {
            series: [
                { name: "Strong Buy", data: [8, 8, 8, 8] },
                { name: "Buy", data: [12, 12, 12, 12] },
                { name: "Hold", data: [6, 6, 6, 6] },
                { name: "Sell", data: [4, 4, 4, 4] },
                { name: "Strong Sell", data: [2, 2, 2, 2] },
            ],
            chart: {
                type: "bar",
                stacked: true,
                height: 350,
            },
            plotOptions: {
                bar: {
                    horizontal: false,
                    columnWidth: '20%',
                    dataLabels: {
                        position: 'top'
                    }
                },
            },
            xaxis: {
                categories: ["Q1", "Q2", "Q3", "Q4"],
                show: true,
                axisBorder: {
                    show: false,
                },
                axisTicks: {
                    show: false,
                },

                labels: {
                    offsetY: -125,
                },
            },
            yaxis: {
                title: {
                    text: "Ratings",
                },
                show: false,
                axisBorder: {
                    show: false,
                },
                axisTicks: {
                    show: false,
                },
            },
            grid: {
                show: false,
            },
            legend: {
                position: "bottom",
                horizontalAlign: "center",
            },
            fill: {
                opacity: 1,
            },
            colors: ["#00C851", "#33B5E5", "#bdbdbd", "#ff4444", "#CC0000"],
            dataLabels: {
                enabled: false,
            },
            tooltip: {
                custom: function ({ seriesIndex, dataPointIndex }) {
                    // Corrected tooltip return format
                    return `
                    <div style="padding: 10px; border: 1px solid #ccc; background: #fff;">
                        <p><strong>${options2.xaxis.categories[dataPointIndex]}</strong></p>
                        <p><strong>${options2.series[seriesIndex].name}:</strong> ${options2.series[seriesIndex].data[dataPointIndex]}</p>
                        <p>Avg Rating: 3.4</p>
                        <p>Avg PT: $60</p>
                        <p>Avg Upside: 22%</p>
                    </div>
                `;
                },
            },
        };

        var chart2 = new ApexCharts(document.querySelector("#stacked-bar-chart"), options2);
        chart2.render();
    </script>

</body>

</html>